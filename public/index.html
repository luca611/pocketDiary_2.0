<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Pocket dIary</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="app.js" type="text/javascript"></script>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <meta name="description"
        content="A digital diary to keep track of your school life featuring a calendar, a schedule, an ia and a grade tracker.">
</head>

<body id="pageBody" class="body" onload="disableLoading(); autologin();">

    <div class="loadingScreen" id="loadingScreen">
        <img class="loadingIcon" src="resources/imgs/loading.webp" alt="">
        <p class="loadingText"></p>
    </div>

    <div id="feedbackContainer">

    </div>

    </div>

    <!-- Add button-->
    <div class="addButtonContainer hidden" id="addButtonContainer">
        <button class="addButton" onclick="openPopup()">
            <img class="addIcon" src="resources/icons/add.svg" alt="add">
        </button>
    </div>

    <!-- Auth pages (inlcuding hero page since it has same layout) -->
    <div class="autenticazione " id="autenticazione">
        <!-- Hero page -->
        <div class="welcomePage" id="welcome">
            <img class="logo" src="resources/imgs/pocketDiaryLogo.svg" alt="">
            <h1 class="titleWelcome">
                <b class="changeColor">Welcome to your</b>
                <br>Pocket D<b class="changeColor">IA</b>ry
            </h1>
            <hr>
            <div class="actionContainer">
                <button class="bottoneLogin" onclick="swapToLogin()"> Login </button>
                <button class="bottoneSignUp" onclick="swapToRegister()">Don’t have an account yet?</button>
            </div>
        </div>

        <!-- Sign up page -->
        <div id="login" class="loginPage hidden">
            <div>
                <h1 class="loginTitle">Login</h1>
                <hr class="authHr">
                <div class="campiCont">
                    <p class="campi">email</p>
                    <input type="username" class="inputField" id="loginUsername" placeholder="myEmail@example.com">
                    <p class="campi">Password</p>
                    <input type="password" class="inputField" id="loginPassword" placeholder="password">
                    <p id="loginError" class="error"></p>
                </div>
                <button class="bottoneLogin confirm" id="confermaLogin" onclick="login()">Login</button>
                <button class="bottoneSignUp" onclick="swapToRegister()">Don’t have an account yet?</button>
            </div>
        </div>

        <!-- Register page -->
        <div id="register" class="registerPage hidden">
            <div>
                <h1 class="registerTitle">Register</h1>
                <hr class="authHr">
                <div class="campiCont">
                    <p class="campi">email</p>
                    <input type="username" class="inputField" id="registerUsername" placeholder="myEmail@example.test">
                    <p class="campi">Password</p>
                    <input type="password" class="inputField" id="registerPassword" placeholder="password">
                    <p class="campi"> Conferma Password</p>
                    <input type="password" class="inputField" id="confirmPassword" placeholder="password">
                    <p id="registerError" class="error"></p>
                </div>
                <button class="bottoneLogin confirm" id="confermaRegistrazione"
                    onclick="proceedToTheme()">Continue</button>
                <button class="bottoneSignUp" onclick="swapToLogin()">Have an account already?</button>
            </div>
        </div>

        <div class="temi hidden" id="theme">
            <div class="themeContainer">
                <h1 class="selezioneTema">Choose a <b class="style1">th</b><b class="style2">e</b><b
                        class="style3">me</b></h1>
                <hr class="authHr">
                <div class="themeScroll">
                    <div id="yellow" class="tuttiTemi border" onclick="setTheme(1)">
                        <img src="resources/imgs/YellowBook.svg" alt="">
                        <div class="raggruppamento">
                            <div class="primoDivTema"> Primary</div>
                            <div class="secondoDivTema"> Side Bar</div>
                            <div class="terzoDivTema"> Pins</div>
                        </div>
                    </div>
                    <div id="blue" class="tuttiTemi" onclick="setTheme(2)">
                        <img src="resources/imgs/BlueBook.svg" alt="">
                        <div class="raggruppamento">
                            <div class="primoDivTema bluePrimary"> Primary</div>
                            <div class="secondoDivTema blueSecondary"> Side Bar</div>
                            <div class="terzoDivTema bluePins"> Pins</div>
                        </div>
                    </div>
                    <div id="green" class="tuttiTemi" onclick="setTheme(3)">
                        <img src="resources/imgs/GreenBook.svg" alt="">
                        <div class="raggruppamento">
                            <div class="primoDivTema greenPrimary"> Primary</div>
                            <div class="secondoDivTema greenSecondary"> Side Bar</div>
                            <div class="terzoDivTema greenPins"> Pins</div>
                        </div>
                    </div>
                    <div id="purple" class="tuttiTemi" onclick="setTheme(4)">
                        <img src="resources/imgs/PurpleBook.svg" alt="">
                        <div class="raggruppamento">
                            <div class="primoDivTema purplePrimary"> Primary</div>
                            <div class="secondoDivTema purpleSecondary"> Side Bar</div>
                            <div class="terzoDivTema purplePins"> Pins</div>
                        </div>
                    </div>
                </div>
                <button class="bottoneLogin confirm" id="ContinueToName"
                    onclick="toPage('theme','name')">Continue</button>
            </div>
        </div>

        <div class="UsernamePage hidden" id="name">
            <div>
                <img src="resources/imgs/pocketDiaryLogo.svg" alt="">
                <hr class="authHr" id="linea">
                <div class="campiCont">
                    <p class="campi">Select an username</p>
                    <input type="username" class="inputField" id="registerName" placeholder="my Cool Name">
                    <p class="campi" id="campoUser">Make sure you like it! This must tell the world who you are!</p>
                    <p id="nameError" class="error"></p>
                </div>
                <button class="bottoneLogin confirm" id="actualRegisterButton" onclick="register()">Confirm</button>
            </div>
        </div>

    </div>
    <!-- Settings page -->
    <div class="page hidden" id="page">
        <!--Contains the upper part of the screen witch is the same everywhere exept Auth pages and settings-->
        <div class="topBar">
            <!--Here's the upper part of tuhe top bar: sidebar button & page title-->
            <div class="upperPart">
                <div class="sideBarButtonContainer">
                    <button class="sideBarButton" onclick="openSideBar()">☰</button>
                </div>
                <div class="titleContainer">
                    <h1 id="pageTitle">title </h1>
                    <h1> <b class="decoratedTitle" id="decoratedTitle">here</b></h1>
                </div>
            </div>
            <!--Here's the lower part of the top part top bar: quick buttons-->
            <div class="lowerPart">
                <div class="buttonScroll">
                    <button class="quickButton" onclick="toCalendar()">
                        <img class="icon" src="resources/icons/calendar.svg" alt="">
                        <b clas="buttonText">Calendar</b>
                    </button>
                    <button class="quickButton" onclick="toGrades()">
                        <img class="icon" src="resources/icons/grade.svg" alt="">
                        <b clas="buttonText">Marks</b>
                    </button>
                    <button class="quickButton">
                        <img class="icon" src="resources/icons/clock.svg" alt="">
                        <b class="buttonText">Schedule</b>
                    </button>
                </div>
            </div>
        </div>
        <!--contains the body of each screen-->
        <div class="body">

            <div id="homepage" class="section">
                <h2 class="subtitle">Upcoming</h2>
                <div id="eventContainer" class="eventContainer">
                    <div id="eventPlaceholder" class="hidden">
                        <!--This is the placeholder for the event list to see it put "visible" class-->
                        <img class="emptyImg" src="./resources/imgs/emptyLogo.webp" alt="">
                        <p class="infoText">Seems like you have nothing left to do today,<br>enjoy a break!</p>
                    </div>
                    <div id="eventsList" class="eventsList">

                    </div>
                </div>
            </div>

            <div id="settings" class="section hidden">
                <div class="impostazioni">
                    <div class="containerSettings" onclick="openNameChange()">
                        <img src="resources/icons/changeName.svg" alt="">
                        <p style="color: var( --primary-color);">CHANGE NAME</p>
                    </div>
                    <div class="containerSettings" onclick="openThemeChange()">
                        <img src="resources/icons/changeTheme.svg" alt="">
                        <p style="color: var( --primary-color);">CHANGE THEME</p>
                    </div>
                    <div class="containerSettings" onclick="changeThemeSettings()">
                        <img src="resources/icons/preferences.svg" alt="">
                        <p style="color: var( --primary-color);">PREFERENCES</p>
                    </div>
                    <div class="containerSettings" onclick="openPasswordChange()">
                        <img src="resources/icons/changePass.svg" alt="" id="cPass">
                        <p style="color: var(--primary-red);">CHANGE PASSWORD</p>
                    </div>
                    <br>
                    <div class="containerSettings" onclick="viewInfo()">
                        <img src="resources/icons/info.svg" alt="" id="info">
                        <p style="color: var(--primary-blue);">APP INFO</p>
                    </div>
                    <div class="containerSettings logout" onclick="logout()">
                        <img src="resources/icons/logOut.svg" alt="" id="logOut">
                        <p style="color: var(--primary-red);">LOG OUT</p>
                    </div>
                </div>
            </div>

            <div id="calendar" class="section hidden">
                <div id="calendarHeader">
                    <h2 id="monthYear"></h2>
                    <div class="switchMonth">
                        <button onclick="prevMonth()"><img src="resources/icons/prev.svg" alt=""></button>
                        <button onclick="nextMonth()"><img src="resources/icons/next.svg" alt=""></button>
                    </div>
                </div>
                <div class="containerCalendario">
                    <div class="calendario">
                        <div id="calendarContainer">
                            <div id="calendarBody">
                                <div class="dayNames">
                                    <div class="monthName">Sun</div>
                                    <div class="monthName">Mon</div>
                                    <div class="monthName">Tue</div>
                                    <div class="monthName">Wed</div>
                                    <div class="monthName">Thu</div>
                                    <div class="monthName">Fri</div>
                                    <div class="monthName">Sat</div>
                                </div>
                                <div id="daysContainer"></div>
                            </div>
                        </div>
                    </div>
                    <div id="eventDetails" class="hidden"></div>
                    <div class="evento">
                        <div class="addButtonContainer" id="addButtonContainer">
                            <button class="addButton" onclick="openPopup()">
                                <img class="addIcon" src="resources/icons/add.svg" alt="add">
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="schedule" class="section hidden">
            </div>

            <div class="report hidden" id="report">
                <h2>report</h2>   
            </div>
            
            <div id="grades" class="section hidden">
                <button class="quickButton max-height-3" onclick="apriReport()">
                    <img src="resources/icons/report.svg" alt="" style="margin-right: 0.5rem;">
                    <b>Report</b>
                </button>
                <div class="voti">
                    <div class="containerVoti">
                        <div class="voto">
                            <div class="numeroVoto">5</div>
                            <div class="descriptionGrades">
                                <h4>VOTE NAME</h4>
                                <p class="descrizioneVoto">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                </p>
                            </div>
                        </div>
                        <div class="voto">
                            <div class="numeroVoto">8</div>
                            <div class="descriptionGrades">
                                <h4>VOTE NAME</h4>
                                <p class="descrizioneVoto">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                </p>
                            </div>
                        </div>
                        <div class="voto">
                            <div class="numeroVoto">3</div>
                            <div class="descriptionGrades">
                                <h4>VOTE NAME</h4>
                                <p class="descrizioneVoto">
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                                </p>
                            </div>

                        </div>
                    </div>
                    <div class="addButtonContainer" id="addButtonContainer">
                        <button class="addButton" onclick="openPopup()">
                            <img class="addIcon" src="resources/icons/add.svg" alt="add">
                        </button>
                    </div>
                </div>
            </div>

            <div id="aiChat" class="section hidden">
            </div>

        </div>
    </div>

    <div class="sidebarContainer">
        <div class="overlay" id="overlaySidebar" onclick="closeSidebar()"></div>
        <div id="sidebar" class="sidebar">
            <!--nav Buttons-->
            <h3 class="navBarTitle">
                Navigation
            </h3>
            <hr class="navSeparator">

            <button id="homeButton" class="barLink" onclick="toSettings()">
                <img class="icon" src="resources/icons/settings.svg" alt="">
                <b class="buttonText>">Settings</b>
            </button>

            <button id="homeButton" class="barLink">
                <img class="icon" src="resources/icons/chat.svg" alt="">
                <b class="buttonText>">Pocket AI</b>
            </button>

            <hr class="navSeparator">

            <button id="homeButton" class="barLink" onclick="toHome()">
                <img class="icon" src="resources/icons/home.svg" alt="">
                <b class="buttonText>">Home</b>
            </button>

            <button id="gradeButton" class="barLink" onclick="toGrades()">
                <img class="icon iconAdjustment" src="resources/icons/grade.svg" alt="">
                <b class="buttonText>">Marks</b>
            </button>

            <button id="calendarButton" class="barLink" onclick="toCalendar()">
                <img class="icon" src="resources/icons/calendar.svg" alt="">
                <b class="buttonText>">Calendar</b>
            </button>

        </div>
    </div>

    <div class="popupContainer">
        <div class="overlay" id="overlayPopUp" onclick="closePopup()"></div>
        <div id="popup" class="popup">
            <div class="popUpBody">
                <!-- event popUp -->
                <div id="eventContainerbody" class="bodyContainer hidden">
                    <div class="fillContainer">
                        event name
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="text" id="eventName" placeholder="Event name">
                    </div>
                    <div class="fillContainer">
                        description
                    </div>
                    <div class="largeInputContainer">
                        <textarea class="inputField" id="eventDescription" placeholder="Event description"></textarea>
                    </div>
                    <div class="fillContainer">
                        Date
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="date" id="eventDate" placeholder="Event date">
                    </div>
                    <p class="error" id="eventError"></p>
                </div>

                <div id="gradeContainer" class="bodyContainer hidden">
                    <div class="fillContainer">
                        GRADE NAME
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="text" id="gradeName" placeholder="Industrial revolution">
                    </div>
                    <div class="fillContainer">
                        SUBJECT
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="text" id="subject" placeholder="history">
                    </div>
                    <div class="fillContainer">
                        GRADE
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="text" id="grade" placeholder="6">
                    </div>
                    <div class="fillContainer">
                        DATE
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="date" id="gradeDate" placeholder="2024/01/12">
                    </div>
                </div>

                <!-- settings popUp -->

                <!-- name -->
                <div id="nameContainer" class="bodyContainer hidden">
                    <div class="fillContainer">
                        NEW NAME
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="text" id="newName" placeholder="Mario Rossi">
                    </div>
                    <p class="error" id="popupNameError"></p>
                </div>

                <!-- password -->
                <div id="passwoswordContainer" class="bodyContainer hidden">
                    <div class="fillContainer">
                        CURRENT PASSWORD
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="password" id="currentPassword" placeholder="old Password">
                    </div>
                    <div class="fillContainer">
                        NEW PASSWORD
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="password" id="newPassword" placeholder="new Password">
                    </div>
                    <div class="fillContainer">
                        CONFIRM PASSWORD
                    </div>
                    <div class="inputContainer">
                        <input class="inputField" type="password" id="newConfirmPassword" placeholder="new Password">
                    </div>
                    <p class="error" id="popupPasswordError"></p>

                </div>


                <!-- color theme popUP-->
                <div id="themeContainer" class="bodyContainer">
                    <div id="rgb" class="fullContainer">
                        <div class="fillContainer">
                            Primary color
                        </div>
                        <div class="colorsContainer">
                            <button id="primaryYellowButton" class="buttonColor primaryYellow"
                                onclick="setColor('primary', 'yellow')">

                            </button>
                            <button id="primaryBlueButton" class="buttonColor primaryBlue"
                                onclick="setColor('primary', 'blue')">

                            </button>
                            <button id="primaryGreenButton" class="buttonColor primaryGreen"
                                onclick="setColor('primary', 'green')">

                            </button>

                            <button id="primaryPurpleButton" class="buttonColor primaryPurple"
                                onclick="setColor('primary', 'purple')">
                            </button>

                            <input type="color" id="primaryColorPicker" class="buttonColor" value="#ffcc00"
                                onchange="setColor('primary', 'custom')">

                            </input>
                        </div>

                        <div class="fillContainer currentSecondary">
                            Secondary color
                        </div>

                        <div class="colorsContainer">
                            <button id="secondaryYellowButton" class="buttonColor secondaryYellow"
                                onclick="setColor('secondary', 'yellow')">

                            </button>
                            <button id="secondaryBlueButton" class="buttonColor secondaryBlue"
                                onclick="setColor('secondary', 'blue')">

                            </button>
                            <button id="secondaryGreenButton" class="buttonColor secondaryGreen"
                                onclick="setColor('secondary', 'green')">

                            </button>

                            <button id="secondaryPurpleButton" class="buttonColor secondaryPurple"
                                onclick="setColor('secondary', 'purple')">

                            </button>

                            <input type="color" id="secondaryColorPicker" class="buttonColor" value="#ffcc00"
                                onchange="setColor('secondary', 'custom')">

                            </input>
                        </div>

                        <div class="fillContainer currentTertiary blackText">
                            tertiary color
                        </div>

                        <div class="colorsContainer">
                            <button id="pinsYellowButton" class="buttonColor tertiaryYellow"
                                onclick="setColor('tertiary', 'yellow')">

                            </button>
                            <button id="pinsBlueButton" class="buttonColor tertiaryBlue"
                                onclick="setColor('tertiary', 'blue')">

                            </button>
                            <button id="pinsGreenButton" class="buttonColor tertiaryGreen"
                                onclick="setColor('tertiary', 'green')">

                            </button>

                            <button id="pinsPurpleButton" class="buttonColor tertiaryPurple"
                                onclick="setColor('tertiary', 'purple')">
                            </button>

                            <input type="color" id="tertiaryColorPicker" class="buttonColor" value="#ffcc00"
                                onchange="setColor('tertiary', 'custom')">

                            </input>
                        </div>
                        <p class="infoText">
                            You can preview the color by tapping outside this form, the color will be applied to the
                            theme but not saved yet, remember to press the confirm button to save the changes!
                        </p>
                        <button id="swapToEx" class="swapButton" onclick="swapToHex()">
                            Swap to HEX colors
                        </button>
                    </div>

                    <div id="hex" class="fullContainer hidden">
                        <div class="fillContainer">
                            Primary color
                        </div>
                        <input type="text" class="inputField" id="primaryColorHex" placeholder="ffff"
                            onchange="setHexColor('primary')">
                        <div class="fillContainer currentSecondary">
                            Secondary color
                        </div>
                        <input type="text" class="inputField" id="secondaryColorHex" placeholder="ffff"
                            onchange="setHexColor('secondary')">
                        <div class="fillContainer currentTertiary blackText">
                            Tertiary color
                        </div>
                        <input type="text" class="inputField" id="tertiaryColorHex" placeholder="ffff"
                            onchange="setHexColor('tertiary')">
                        <p class="infoText">
                            You can preview the color by tapping outside this form, the color will be applied to the
                            theme but not saved yet, remember to press the confirm button to save the changes!
                        </p>
                        <button id="swapToColor" class="swapButton" onclick="swapToRgb()">
                            Swap to color picker
                        </button>
                    </div>
                </div>



            </div>
            <!-- lower part of the pop up same as always-->
            <div class="buttonContainer">
                <button id="popupCancelButton" class="popupButton danger" onclick="closePopup()">Cancel</button>
                <button id="popupConfrimButton" class="popupButton">Create</button>
            </div>

        </div>
    </div>


    <script>

        /*
                a = document.createElement("button")
                a.innerHTML = "show"
                a.style.position = "absolute";
                a.style.top = "0";
                a.style.left = "0";
                a.onclick = () => {
                        document.getElementById("themeContainer").classList.remove("hidden");
                        document.getElementById("eventContainerbody").classList.add("hidden");
                        console.log("ex")
                }
                document.getElementById("pageBody").appendChild(a)
           */

        const numeriVoto = document.querySelectorAll('.numeroVoto');

        numeriVoto.forEach(numeroVotoElement => {
            // Estrai il numero contenuto (e assicurati che sia un numero valido)
            const numeroVoto = parseInt(numeroVotoElement.textContent);

            // Cambia il colore del testo in base al numero
            if (numeroVoto >= 8) {
                numeroVotoElement.style.borderColor = 'green'; // Verde per voti >= 8
            } else if (numeroVoto >= 5) {
                numeroVotoElement.style.borderColor = 'orange'; // Arancione per voti >= 5
            } else {
                numeroVotoElement.style.borderColor = 'red'; // Rosso per voti < 5
            }
        });
    </script>

</body>

</html>